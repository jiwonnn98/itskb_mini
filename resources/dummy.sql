-- 진료과
CREATE TABLE DEPARTMENT(
    DEPT_CODE NUMBER PRIMARY KEY, -- 과코드(PK)
    DEPT_NAME VARCHAR2(18) NOT NULL, -- 과이름
    DEPT_LOC VARCHAR2(18) NOT NULL -- 위치
);

-- 환자
CREATE TABLE PATIENT(
    PATIENT_SEQ NUMBER PRIMARY KEY, -- 환자식별번호(PK)
    PATIENT_SSN VARCHAR2(14) UNIQUE NOT NULL, -- 환자주민번호
    PATIENT_ADDRESS VARCHAR2(200) NOT NULL, -- 주소
    PATIENT_NAME VARCHAR2(15) NOT NULL, -- 이름
    PATIENT_PHONE VARCHAR2(13) NOT NULL -- 휴대폰 번호
);

-- 의사
CREATE TABLE DOCTOR(
    DOCTOR_SEQ NUMBER PRIMARY KEY, -- 의사식별번호(PK)
    DOCTOR_SSN VARCHAR2(14) UNIQUE NOT NULL, -- 의사주민번호
    DOCTOR_NAME VARCHAR2(15) NOT NULL, -- 이름
    DEPT_CODE NUMBER CONSTRAINT DOCTOR_DEPT_FK REFERENCES DEPARTMENT (DEPT_CODE) -- 과코드(FK)
);

-- 진료
CREATE TABLE DIAGNOSIS(
    DIAGNOSIS_SEQ NUMBER PRIMARY KEY, -- 진료식별번호 (PK)
    DIAGNOSIS_PRESCRIPTION VARCHAR2(600) NOT NULL, -- 처방
    DIAGNOSIS_DATE DATE NOT NULL, -- 진료일
    PATIENT_SEQ NUMBER CONSTRAINT DIAG_PATIENT_FK REFERENCES PATIENT (PATIENT_SEQ), -- 환자식별번호 (FK)
    DOCTOR_SEQ NUMBER CONSTRAINT DIAG_DOCTOR_FK REFERENCES DOCTOR (DOCTOR_SEQ) -- 의사식별번호 (FK)
);

-- 근무표
CREATE TABLE SCHEDULE(
    SCHEDULE_SEQ NUMBER PRIMARY KEY, -- 근무식별번호(PK)
    DOCTOR_SEQ NUMBER CONSTRAINT SCHE_DOCTOR_FK REFERENCES DOCTOR (DOCTOR_SEQ), -- 의사식별번호(FK)
    START_BLOCK_SEQ NUMBER(2,0) CHECK (START_BLOCK_SEQ >= 0 AND START_BLOCK_SEQ <= 17), -- 근무시작번호
    END_BLOCK_SEQ NUMBER(2,0) CHECK (END_BLOCK_SEQ >= 0 AND END_BLOCK_SEQ <= 17), -- 근무종료번호
    SCHEDULE_DATE DATE NOT NULL-- 근무일
);

-- 예약
CREATE TABLE RESERVATION(
    RESERVATION_SEQ NUMBER PRIMARY KEY, -- 예약식별번호(PK)
    RESERVATION_DATE DATE NOT NULL, -- 예약일
    PATIENT_SEQ NUMBER CONSTRAINT RESERV_PATIENT_FK REFERENCES PATIENT (PATIENT_SEQ), -- 환자식별번호(FK)
    SCHEDULE_SEQ NUMBER CONSTRAINT RESERV_SCHEDULE_FK REFERENCES SCHEDULE (SCHEDULE_SEQ), -- 근무식별번호(FK)
    RESERVATION_BLOCK_SEQ NUMBER(2,0) CHECK (RESERVATION_BLOCK_SEQ >= 0 AND RESERVATION_BLOCK_SEQ <= 17) -- 예약시간번호
);


--환자 정보 생성

CREATE SEQUENCE patient_seq START WITH 1 INCREMENT BY 1;

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '880101-1234567', '서울시 강남구', '김철수', '010-1234-5678');

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '880102-2345678', '서울시 서초구', '이영희', '010-2345-6789');

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '900101-1234567', '인천시 연수구', '조민수', '010-4567-1234');

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '900102-2345678', '대전시 중구', '김영희', '010-5678-2345');

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '900110-3456789', '광주시 서구', '이민준', '010-6789-3456');

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '910101-4567890', '대구시 중구', '박지훈', '010-7890-1234');

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '910102-5678901', '울산시 남구', '김서영', '010-8901-2345');

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '910103-6789012', '부산시 해운대구', '이다영', '010-9012-3456');

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '910104-7890123', '서울시 강북구', '장현우', '010-0123-4567');

INSERT INTO PATIENT(PATIENT_SEQ, PATIENT_SSN, PATIENT_ADDRESS, PATIENT_NAME, PATIENT_PHONE)
VALUES (patient_seq.NEXTVAL, '910105-8901234', '제주시 제주구', '정은지', '010-1234-5678');



--진료과 목록 생성
INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (1, '내과', '1층');

INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (2, '외과', '2층');

INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (3, '이비인후과', '3층');

INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (4, '정형외과', '4층');

INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (5, '피부과', '5층');

INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (6, '산부인과', '6층');

INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (7, '소아과', '7층');

INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (8, '신경과', '8층');

INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (9, '안과', '9층');

INSERT INTO DEPARTMENT(DEPT_CODE, DEPT_NAME, DEPT_LOC)
VALUES (10, '치과', '10층');


--의사 정보 생성

CREATE SEQUENCE doctor_seq START WITH 1 INCREMENT BY 1;

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '820101-1234567', '김의사', 1);

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '820102-2345678', '이의사', 1);

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '820103-2345518', '임의사', 2);

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '870402-2345698', '권의사', 2);

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '900102-1876543', '최의사', 3);

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '821002-2876495', '정의사', 3);

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '820908-2578462', '장의사', 4);

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '770830-2096533', '모의사', 4);

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '830506-1874938', '노의사', 5);

INSERT INTO DOCTOR(DOCTOR_SEQ, DOCTOR_SSN, DOCTOR_NAME, DEPT_CODE)
VALUES (doctor_seq.NEXTVAL, '821212-1756489', '박의사', 5);


--진료 목록 생성
CREATE SEQUENCE diagnosis_seq START WITH     1 INCREMENT BY   1;

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방1', TO_DATE('2023-07-11', 'YYYY-MM-DD'), 1, 1);

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방2', TO_DATE('2023-07-22', 'YYYY-MM-DD'), 2, 1);

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방3', TO_DATE('2023-07-23', 'YYYY-MM-DD'), 3, 2);

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방4', TO_DATE('2023-07-24', 'YYYY-MM-DD'), 4, 2);

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방5', TO_DATE('2023-07-25', 'YYYY-MM-DD'), 5, 2);

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방6', TO_DATE('2023-07-26', 'YYYY-MM-DD'), 6, 3);

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방7', TO_DATE('2023-07-27', 'YYYY-MM-DD'), 7, 3);

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방8', TO_DATE('2023-07-28', 'YYYY-MM-DD'), 1, 4);

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방9', TO_DATE('2023-08-01', 'YYYY-MM-DD'), 2, 4);

INSERT INTO DIAGNOSIS(DIAGNOSIS_SEQ, DIAGNOSIS_PRESCRIPTION, DIAGNOSIS_DATE, PATIENT_SEQ, DOCTOR_SEQ)
VALUES (diagnosis_seq.NEXTVAL, '처방10', TO_DATE('2023-08-02', 'YYYY-MM-DD'), 3, 5);



--스케줄 생성

CREATE SEQUENCE schedule_seq
  START WITH     1
  INCREMENT BY   1;


INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 1, 0, 8, TO_DATE('2023-08-04', 'YYYY-MM-DD'));

INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 2, 9, 17, TO_DATE('2023-08-04', 'YYYY-MM-DD'));

INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 3, 0, 8, TO_DATE('2023-08-04', 'YYYY-MM-DD'));

INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 4, 9, 17, TO_DATE('2023-08-04', 'YYYY-MM-DD'));

INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 5, 0, 8, TO_DATE('2023-08-04', 'YYYY-MM-DD'));

INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 6, 9, 17, TO_DATE('2023-08-04', 'YYYY-MM-DD'));

INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 1, 0, 8, TO_DATE('2023-08-05', 'YYYY-MM-DD'));

INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 2, 9, 17, TO_DATE('2023-08-05', 'YYYY-MM-DD'));

INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 3, 0, 8, TO_DATE('2023-08-05', 'YYYY-MM-DD'));

INSERT INTO SCHEDULE(SCHEDULE_SEQ, DOCTOR_SEQ, START_BLOCK_SEQ, END_BLOCK_SEQ, SCHEDULE_DATE)
VALUES (schedule_seq.NEXTVAL, 1, 9, 17, TO_DATE('2023-08-06', 'YYYY-MM-DD'));




--예약 생성
CREATE SEQUENCE reservation_seq
  START WITH     1
  INCREMENT BY   1;

INSERT INTO RESERVATION(RESERVATION_SEQ, RESERVATION_DATE, PATIENT_SEQ, SCHEDULE_SEQ, RESERVATION_BLOCK_SEQ)
VALUES (reservation_seq.NEXTVAL, TO_DATE('2023-08-04', 'YYYY-MM-DD'), 3, 3, 0);

INSERT INTO RESERVATION(RESERVATION_SEQ, RESERVATION_DATE, PATIENT_SEQ, SCHEDULE_SEQ, RESERVATION_BLOCK_SEQ)
VALUES (reservation_seq.NEXTVAL, TO_DATE('2023-08-04', 'YYYY-MM-DD'), 4, 4, 9);

INSERT INTO RESERVATION(RESERVATION_SEQ, RESERVATION_DATE, PATIENT_SEQ, SCHEDULE_SEQ, RESERVATION_BLOCK_SEQ)
VALUES (reservation_seq.NEXTVAL, TO_DATE('2023-08-04', 'YYYY-MM-DD'), 5, 5, 8);

INSERT INTO RESERVATION(RESERVATION_SEQ, RESERVATION_DATE, PATIENT_SEQ, SCHEDULE_SEQ, RESERVATION_BLOCK_SEQ)
VALUES (reservation_seq.NEXTVAL, TO_DATE('2023-08-05', 'YYYY-MM-DD'), 6, 6, 0);

INSERT INTO RESERVATION(RESERVATION_SEQ, RESERVATION_DATE, PATIENT_SEQ, SCHEDULE_SEQ, RESERVATION_BLOCK_SEQ)
VALUES (reservation_seq.NEXTVAL, TO_DATE('2023-08-05', 'YYYY-MM-DD'), 7, 7, 9);



select * from patient;
select * from doctor;
select * from reservation;
select * from diagnosis;
select * from department;
select * from schedule;



